<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Week 2</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R for data analysis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="exercise_sheet_1.html">Exercises 1</a>
</li>
<li>
  <a href="exercise_sheet_2.html">Exercises 2</a>
</li>
<li>
  <a href="exercise_sheet_3.html">Exercises 3</a>
</li>
<li>
  <a href="exercise_sheet_5.html">Final assignment</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-lightbulb-o"></span>
     
    Solutions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="solutions_exercise_1.html">Solutions 1</a>
    </li>
    <li>
      <a href="solutions_exercise_2.html">Solutions 2</a>
    </li>
    <li>
      <a href="solutions_exercise_3.html">Solutions 3</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Week 2</h1>

</div>


<div id="learning-goals" class="section level2">
<h2>Learning goals</h2>
<p>After completing these tasks, you'll be able to read in csv-formatted data, use different functions to look at the data, create simple plots of the data, and to save the plots you created. New concepts: data structures, factors, NA, writing to file, plot elements</p>
</div>
<div id="exercises" class="section level1">
<h1>Exercises</h1>
<p><a href="https://youtu.be/wITUZhzovY8" target="_blank">Demo 2: Data structures (lecture)</a></p>
<p><a href="https://youtu.be/kz8yWs_Qt28" target="_blank">Demo 2: Data structures (demo)</a></p>
<div id="more-data-structures" class="section level2">
<h2>2.1. More data structures</h2>
<p>Q2.1.1 Create three vectors called x,y,z, each of them numeric and 4 elements long. Try to use a different function for creating each.</p>
<div id="matrices" class="section level3">
<h3>Matrices</h3>
<p>Q2.1.2 Join these three vectors together using the command <code>cbind()</code>.</p>
<p>Q2.1.3 Print out (onto the screen) the third value on the second row using square bracket notation.</p>
<p>Q2.1.4 Use the function <code>matrix()</code> to create a 3-by-3 matrix filled with uniformly distributed random numbers (runif).</p>
<p>Tip: you need to create 9 random numbers and then give the resulting vector as a parameter to matrix function, defining the number of rows and/or columns.</p>
<p>Q2.1.5 Print out the 2-by-2 matrix which consists of rows 2 and 3 and columns 2 and 3 of the larger matrix in Q2.1.4.</p>
</div>
<div id="lists" class="section level3">
<h3>Lists</h3>
<p>Q2.1.6 Create a list whose elements are your matrices from Q2.1.2 and Q2.1.4.</p>
<p>Q2.1.7 Through the list, access the first element of the first matrix.</p>
</div>
</div>
<div id="working-with-data" class="section level2">
<h2>2.2 Working with data</h2>
<p><a href="https://youtu.be/-NUHUhphDSU" target="_blank">Demo 2: Factors and NA (lecture)</a></p>
<p><a href="https://youtu.be/gcHpLiGevFo" target="_blank">Demo 2: Data (lecture)</a></p>
<p><a href="https://youtu.be/ssVgi2UkIqM" target="_blank">Demo 2: Loading and inspecting data (demo)</a></p>
<div id="loading-data" class="section level3">
<h3>Loading data</h3>
<p>Q2.2.1 Download the exercise data to your local computer. The data set is available on Moodle.</p>
<p>Q2.2.2 Load the csv file with the command <code>data &lt;- read.csv([yourfilelocation], sep=';')</code>.</p>
<p>Tip: If you're having trouble with data import (e.g. you're not getting the right number of columns, which in this case should be 55), you can also use the graphical &quot;import dataset&quot; (under the environment tab, in the top right window).</p>
<p>Note: Import dataset should not be your default way of loading in data, but it can make life easier the first time you're importing something (especially when you're still a beginner at R). Import dataset will ouput the import command (with the correct parameters) to your console, so you can copy the command form there and paste it to the top of your script. This way you can run the import from the script window next time.</p>
</div>
<div id="first-looks-at-your-data" class="section level3">
<h3>First looks at your data</h3>
<p>Q2.2.3 Take an initial look at the data by printing out the first five rows with <code>head</code>.</p>
<p>Q2.2.4 Print out the last 10 rows with <code>tail</code>. You need to explicitly give an argument to get 10 instead of 5, can you find out from the help what that parameter is called?</p>
<p>Q2.2.5 Get some summary statistics with <code>summary</code>.</p>
<p>Q2.2.6 Load the package 'psych' and get a different kind of summary statistics representation with <code>describe</code>. Note: You should already have psych installed if you did the last set of exercises.</p>
</div>
<div id="indexing-a-data-frame" class="section level3">
<h3>Indexing a data frame</h3>
<p>Q2.2.7 Use square brackets to access the 7th row.</p>
<p>Q2.2.8 Use $ indexing to access the co_Gender column.</p>
<p>Q2.2.9 Can you spot what is wrong with the data in Q2.2.7 and Q2.2.8?</p>
<p>Q2.2.10 Convert categorical variables to factors with with factor(). For gender, 1=female, 2=male. For education level, 1=low, 2=middle, 3=high.</p>
<p>Q2.2.11 Run summary again, see what has changed in summary for the columns you made into factors.</p>
<p>Q2.2.12 Use square bracket notation and a vector of column names to access age, gender, education level and Healthy_pattern for all rows.</p>
</div>
<div id="plotting" class="section level3">
<h3>Plotting</h3>
<p><a href="https://youtu.be/dIr-aBS7uPU" target="_blank">Demo 2: simple plots (demo)</a></p>
<p>Q2.2.13 Run <code>plot(data[,c('Age_calculated','Healthy_pattern')])</code>, look at the resulting plot, and then run <code>plot(data[,c('co_EDUC_fam_clas','Healthy_pattern')])</code>. You used the same command, why do the plots look different?</p>
<p>Tip: You can use the arrows at the top of plot viewer to view earlier plots you've made. We will go over combining multiple plots in the same figure next week.</p>
<p>Q2.2.14 Let's build a histogram of the use of fresh vegetables in this sample! Start by running <code>hist(data$Freshveg)</code></p>
<p>Q2.2.15 Looks like we need more bars to get a better look, add parameter <code>breaks=20</code>. You can play around with the number to find one which feels good to you.</p>
<p>Q2.2.16 Try adding x and y axis labels with <code>xlab=&quot;Fresh vegetable consumption frequency (times per week)&quot;</code> and <code>ylab=&quot;Number of participants&quot;</code></p>
<p>Q2.2.17 Add title to your plot with the parameter <code>main</code></p>
<p>Q2.2.18 Add a colour to the bars with <code>col</code>.</p>
<p>Tip: You can get a list of acceptable colour name strings with <code>colours()</code> (Note: Checking the colours is something it would be fine to just type into the console and not include in the script - you're just looking up what options you have and once you've decided, you do not need to run the check again). You can also define your own rgb colour with rgb()</p>
<p>Q2.2.19 Once you're happy with your plot, save it as a pdf-file.</p>
<p>Tip: Remember to put your pdf() command before you build the plot and run dev.off() after you're done until the console says null device. If this is very difficult, you can also click Export &gt; Save as PDF (but saving from the script is preferred for replicability)</p>
<p>Q2.2.20 Run the following code</p>
<pre class="r"><code>with(data, hist(Freshveg[co_Gender==&#39;male&#39;], 
                col=rgb(0,0,1,0.5), 
                breaks=0:35, 
                freq=F, 
                xlim=c(0,35),
                xlab=&quot;Fresh vegetable consumption frequency (times per week)&quot;, 
                ylab=&quot;Number of participants&quot;, 
                main=&quot;Fresh vegetable use&quot;))
with(data, hist(Freshveg[co_Gender==&#39;female&#39;], 
                col=rgb(1,0,0,0.5), 
                breaks=0:35, 
                freq=F, 
                add=T))
legend(&quot;topright&quot;, legend=c(&quot;Girls&quot;, &quot;Boys&quot;),
       col=c(rgb(1,0,0,0.5), rgb(0,0,1,0.5)), lwd=10)</code></pre>
<p>Do you understand what this code does? What does the parameter freq control? What about the parameter add?</p>
<p>Tip: You can try to comment out lines or change the input values to see what changes</p>
<p>Q2.2.21 Make a scatter plot which shows BMI as a function of age. You can also practice adding axis labels, a title, and changing other graphical parameters if you'd like. Save the resulting plot.</p>
<p>Tip: If you want to color by categorical variable, in scatter plots it is easier than with histograms. You just need to add <code>col=as.integer(data$co_EDUC_fam_clas)</code> (or any other factor vector) as an argument.</p>
</div>
</div>
<div id="if-else-structure" class="section level2">
<h2>2.3 If-else structure</h2>
<p><a href="https://youtu.be/2sS72Eei7uk" target="_blank">Demo 2: If-else</a></p>
<p>Q2.3.1 Run the following loop</p>
<pre class="r"><code># an example loop for going over 20 first rows of the data set
for(row in 1:20){ # if you wanted to go over the whole data set, you would set the end to be nrow(data)
  if (is.na(data$Chocolate[row])){
    cat(paste0(&quot;We do not know if subject &quot;, data$ID_number[row], &quot; eats chocolate.\n&quot;))
  } else if (data$Chocolate[row]==0){
    cat(paste0(&quot;Subject &quot;, data$ID_number[row], &quot; does not eat chocolate.\n&quot;))
  } else {
    cat(paste0(&quot;Subject &quot;, data$ID_number[row], &quot; eats chocolate.\n&quot;))
  }
}</code></pre>
<p>Tip: The string &quot;\n&quot; tells the computer to insert a line break.</p>
<p>Q2.3.2 Edit the loop above so that if the subject eats chocolate and their weekly chocolate consumption is more than the average amount (function mean, remember to use na.rm=T) it will output &quot;Subject X eats more than average amount of chocolate per week&quot; and if they eat less than the average amount, it will ouput &quot;Subject X eats less than average amount of chocolate per week&quot;</p>
<p>Q2.3.3 Create a new loop which goes over each row of your data frame. For each row, the loop will print &quot;This is subject number &quot; + the subject's ID number</p>
<p>Q2.3.4 Continue building the loop by adding another sentence to the output. If the subject is male, the loop should print &quot;He is X years old.&quot; and if the subject is female, it should print &quot;She is X years old.&quot; If the subject's gender is not known (is.na), it should print out &quot;They are X years old.&quot;</p>
<p>Tip: Control for NA first, otherwise you will get an error when the loop encounters its first NA.</p>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<ul>
<li><a href="https://www.youtube.com/playlist?list=PLDDYJXmrJm8UbNBXn2LAD2WvpG1hotOCP" target="_blank">You can find the demo videos introducing new concepts and giving you tools to complete these exercises here</a></li>
<li><a href="./images/slides_for_demo_2.pdf" target="_blank">You can find the slides shown in the video here</a></li>
<li><a href="./code_demo_2.html" target="_blank">You can see the code from the videos here</a></li>
<li><a href="./solutions_exercise_2.html" target="_blank">You can see the solutions for the exercises here</a> (but do try to solve the tasks with help from the demo code and google before looking at solutions)</li>
</ul>
</div>
</div>

&nbsp;
<style>
* {
  box-sizing: border-box;
}

/* Create three equal columns that floats next to each other */
.column {
  float: left;
  width: 33.33%;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
</style>
<hr />
<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<div class="row">
  <div class="column">
  	<p style="text-align: left;"><span style="color: #808080;">Created by <a href="https://users.aalto.fi/~jtsuvile/">Juulia Suvilehto </a>
	<br><em>juulia.suvilehto@iki.fi</em></span>
<br>
    <a href="https://twitter.com/JSuvilehto" class="fa fa-twitter"></a>
    <a href="https://www.linkedin.com/in/suvilehto/" class="fa fa-linkedin"></a>
    <a href="https://github.com/jtsuvile" class="fa fa-github"></a>
</p>
  </div>
  <div class="column">
  	<p style="text-align: right;"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a></p>
  </div>
    <div class="column">
  	<p style="text-align: right;">This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a></p>
  </div>
</div>


&nbsp;



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
